<!DOCTYPE HTML>
<html>
<head>
  <meta charset="utf-8">
</head>
<body>
  <button onclick="vote()" id="button">Vote!</button>
  <script>
    function vote() {
      button.innerHTML = 'processing ...'
      const xhr = new XMLHttpRequest();
      xhr.open('GET', '/vote', true);
      
      xhr.onreadystatechange = function() { // (3)
        if (xhr.readyState != 4) return;
        if (xhr.status != 200) {
          // handle error
          alert('Error ' + xhr.status + ': ' + xhr.statusText);
          return;
        } 
          // handle result
          button.innerHTML = xhr.responseText;
        }
      xhr.send();
    }
  </script>
</body>
</html>